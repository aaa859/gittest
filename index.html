<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
    <script src="./vue.js"></script>
    <link rel="stylesheet" href="./index.css" />
  </head>
  <body>
    <div id="app">
     <div class="header">
       <div class="container">
         <div class="logo">todolist</div>
         <div class="input-area">
           <input type="text" @input = 'handleInput' :value = 'masks'>
           <button @click = 'addMask'>添加</button>
         </div>
       </div>
     </div>
     <div class="container">
       <h2>
         <span>正在进行</span>
         <span class = 'mask-num'>{{needDoList.length}}</span>
       </h2>
       <ul class = 'mask-list'>
         <li v-for= '(doing,index) in needDoList' :key = 'doing.id' >
           <div>
             <input type="checkbox" @change = 'doCheck(index,"need")' >
             <span>{{doing.title}}</span>
           </div>
           <button @click = 'deleteMask(index,"need")'>删除</button>
         </li>
       </ul>
     </div>
     <div class="container"> <h2>
      <span>已经完成</span>
      <span class = 'mask-num'>{{done.length}}</span>
    </h2>
    <ul class = 'mask-list complete-list'>
      <li v-for = '(item ,index) in done' :key = 'item.id'>
        <div>
          <input type="checkbox" @change = 'doCheck(index,"dfasf")'>
          <span>{{item.title}}</span>
        </div>
        <button @click = 'deleteMask(index,"complete")'>删除</button>
      </li></div>
    </div>

    <script>
      const vm = new Vue({
        el: '#app',
        data:{
          masks:'',
          needDoList:[],
          done:[]

        },
        methods:{
          //拿到输入框的值
          handleInput(e){
           this.masks = e.target.value;
          },
          //输入框的值保存到数组中，将数组循环渲染在页面上
          addMask(){
            if(this.masks === ''){
              return
            }
            this.needDoList.push({
              title:this.masks,
              id:Math.random()
            })
            console.log(this.needDoList)

            // console.log(this.needDoList)
            //通过:value=mask,动态绑定
            this.masks = '';
          },
          //点击正在进行前面checkbox变成已经完成，@change事件，通过展开运算符将数组展开为字符串
          //splice(index,1)  从index项删除一位，一般index为当前项，也就是点击哪个删除哪个的意思
          
          //同一个点击绑定两个checkbox点击事件，通过传递type不同分别执行不同的操作
          doCheck(index,type){
            if(type === 'need'){
              const finish = this.needDoList.splice(index,1)
              this.done.push(...finish)
            }else{
              const finish = this.done.splice(index,1)
              this.needDoList.push(...finish)
            }
            
          },
          //删除  同一个button方法绑定两个button，不同button通过传递不同的type区分，方法执行对应的操作
          deleteMask(index,type){
            if(type === 'need'){
              this.needDoList.splice(index,1)
            }else{
              this.done.splice(index,1)
            }
          }
        }
      })
    </script>
  </body>
</html>
